# =============================================================================
# Anomaly Detection Pipeline - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
#
# Pipeline: VLM (OpenRouter) -> SAM3 Segmentation

# -----------------------------------------------------------------------------
# Model Paths (Required)
# -----------------------------------------------------------------------------

# Path to SAM3 model checkpoint
# Download from: https://huggingface.co/facebook/sam3
# The checkpoint file is named sam3.pt (3.45 GB)
SAM3_MODEL_PATH=weights/sam3.pt

# -----------------------------------------------------------------------------
# OpenRouter VLM Configuration (Required)
# -----------------------------------------------------------------------------

# OpenRouter API key (get from https://openrouter.ai)
OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxxxxxxxxx

# VLM model to use (default: bytedance-seed/seed-1.6-flash)
OPENROUTER_MODEL=bytedance-seed/seed-1.6-flash

# VLM processing frequency (process every N frames)
VLM_EVERY_N_FRAMES=10

# Max frames to wait for VLM response before discarding
VLM_MAX_GENERATION_FRAMES=60

# -----------------------------------------------------------------------------
# Device Configuration
# -----------------------------------------------------------------------------

# Device to use: "auto", "cuda", "cuda:0", "cuda:1", "cpu"
ANOMALY_DEVICE=auto

# -----------------------------------------------------------------------------
# Detection Settings
# -----------------------------------------------------------------------------

# Confidence threshold for detections (0.0 - 1.0)
ANOMALY_CONFIDENCE_THRESHOLD=0.3

# -----------------------------------------------------------------------------
# Output Settings
# -----------------------------------------------------------------------------

# Directory to save segmentation masks (optional)
ANOMALY_MASK_OUTPUT_DIR=output/masks

# -----------------------------------------------------------------------------
# Web Server Configuration
# -----------------------------------------------------------------------------

# Server host and port
WEB_HOST=0.0.0.0
WEB_PORT=8000

# -----------------------------------------------------------------------------
# Video Processing Settings
# -----------------------------------------------------------------------------

# Target FPS for video processing
TARGET_FPS=30

# Frame buffer size (number of frames to buffer)
FRAME_BUFFER_SIZE=120
